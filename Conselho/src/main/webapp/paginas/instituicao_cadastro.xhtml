<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:body>
	<ui:composition template="#{MBInstituicaoCadastro.template}">
		<ui:define name="content">
			<p:panel header=" Cadastro de Instituição">
			
				<p:messages id="msgs1" showDetail="true">
					<p:effect type="pulsate" event="load" delay="500" />
				</p:messages>
					
					<h:form id="formGrid">	
					
					<!-- Linha 1 -->
					<h:panelGrid columns="2" style="margin-top: 10px;">
				       <p:outputLabel value="Data cadastro :" />
				       <p:outputLabel value="Conselheiro Logado :" />				       
				       <p:inputText value="#{MBConselheiroCadastro.dataCadastro}" size="8" disabled="true" />				       
				       <p:inputText value="#{MBConselheiroCadastro.conselheiroLogado.nomeUsual}" size="17" disabled="true" />
					</h:panelGrid>							

					<!-- Linha 1 -->
					<h:panelGrid columns="1">
						<p:outputLabel value="Nome Fantasia :" />
						<p:inputText value="#{MBInstituicaoCadastro.nomeFantasia}" size="40" required="true" requiredMessage="Informe o Nome Fantasia" />
					</h:panelGrid>			

					<h:panelGrid id="grdCentral">

					<!-- Linha 2 -->
					<h:panelGrid columns="5">
						<p:outputLabel value="Razão Social :" />
						<h:inputHidden />
						<p:outputLabel value="CIE:" />
						<h:inputHidden />						
						<p:outputLabel value="CNPJ:" />
						

						<p:inputText value="#{MBInstituicaoCadastro.nomeRazao}" size="59" required="true" type="text" placeholder="Insira a Razão Social" />
						<p:spacer width="10px;" />
												
						<p:inputMask value="#{MBInstituicaoCadastro.cie}" size="4" mask="999999" />
						<p:spacer width="2px;" />																							
						
						<p:inputMask id="cnpj" value="#{MBInstituicaoCadastro.cnpj}"
							mask="99.999.999/9999-99" size="15" required="false">
							<p:ajax event="blur" listener="#{MBInstituicaoCadastro.validaCNPJ}" update=":msgs1" />
						</p:inputMask>
						
					 </h:panelGrid>

					<!-- Linha 3 -->
					<h:panelGrid columns="8">
					<p:outputLabel value="Tipo Instituição:" />
						<h:inputHidden />
						<p:outputLabel value="Fone I:" />
						<h:inputHidden />
						<p:outputLabel value="Fone II:" />
						<h:inputHidden />
						<p:outputLabel value="E-mail :" />
						<h:inputHidden />

                        <p:selectOneMenu style="width:183px;" id="cbTipo"
							value="#{MBInstituicaoCadastro.tipoInstituicaoSelecionado}"
							converter="omnifaces.SelectItemsConverter" filter="true"
							filterMatchMode="contains" required="true">
							<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
							<f:selectItems
							value="#{MBInstituicaoCadastro.listaTipoInstituicao}"
							var="tipo" itemValue="#{tipo}"
							itemLabel="#{tipo.nome}" />
						</p:selectOneMenu>							
						<p:spacer width="3px;" /> 
						 
						<p:inputMask id="foneI" value="#{MBInstituicaoCadastro.foneI}"
							mask="(99)999?9-99999" size="10" required="true" requiredMessage="Informe Telefone I"/>
					    <p:spacer width="5px;" />
					    
						<p:inputMask id="foneII" value="#{MBInstituicaoCadastro.foneII}"
							mask="(99) 999?9-99999" size="10" />
						<p:spacer width="3px;" />
						
						<p:inputText value="#{MBInstituicaoCadastro.email}" size="27" type="text" placeholder="mail@exemplo.com.br" >
							<p:ajax event="blur" listener="#{MBInstituicaoCadastro.validaEmail}" update=":msgs1" />
						</p:inputText>
						<p:spacer width="10px;" />
					</h:panelGrid>

					<!-- Linha 4 -->
					<h:panelGrid columns="6">
						<p:outputLabel value="Contato :" />
						<h:inputHidden />
						<p:outputLabel value="Fone Contato I:" />
						<h:inputHidden />
						<p:outputLabel value="Fone Contato II:" />
						<h:inputHidden />

						<p:inputText value="#{MBInstituicaoCadastro.contato}" size="58" type="text" placeholder="Insira um contato" />
						<p:spacer width="5px;" />
						<p:inputMask id="fonePessoalI"
							value="#{MBInstituicaoCadastro.foneContatoI}" mask="(99) 999?9-99999" size="10" />
						<p:spacer width="5px;" />
						<p:inputMask id="fonePessoalII"
						value="#{MBInstituicaoCadastro.foneContatoII}" mask="(99) 999?9-99999" size="10" />
						<p:spacer width="5px;" />
					</h:panelGrid>

					<p:fieldset legend="Endereço" toggleable="false">

					<!-- Linha 5 -->
					<h:panelGrid columns="5">
						<p:outputLabel value="Estado:" />
						<h:inputHidden />
						<p:outputLabel value="Cidade:" />
						<h:inputHidden />
						<p:outputLabel value="Bairro:" />

						<p:selectOneMenu style="width:59px;" id="cbEstado" value="#{MBInstituicaoCadastro.estadoSelecionado}"
						    converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains">
						<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
						<f:selectItems value="#{MBInstituicaoCadastro.listaEstado}"
							var="estado" itemValue="#{estado}" itemLabel="#{estado.sigla}" />
						<p:ajax event="change" listener="#{MBInstituicaoCadastro.buscaCidade}" update="cbCidade, cbBairro, cbLogradouro" />
						</p:selectOneMenu>
						<p:spacer width="2px;" />

						<p:selectOneMenu style="width:230px;" id="cbCidade" value="#{MBInstituicaoCadastro.cidadeSelecionado}"
						    converter="omnifaces.SelectItemsConverter" filter="true"
							filterMatchMode="contains" required="true" requiredMessage="Informe a Cidade">
						<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
						<f:selectItems value="#{MBInstituicaoCadastro.listaCidade}"
							var="cidade" itemValue="#{cidade}" itemLabel="#{cidade.nome}" />
						<p:ajax event="change" listener="#{MBInstituicaoCadastro.buscaBairro}" update="cbBairro, cbLogradouro" />
						</p:selectOneMenu>
						<p:spacer width="2px;" />

						<p:selectOneMenu style="width:280px;" id="cbBairro" value="#{MBInstituicaoCadastro.bairroSelecionado}"
							converter="omnifaces.SelectItemsConverter" filter="true"
							filterMatchMode="contains" required="true" requiredMessage="Informe o Bairro">
						<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
						<f:selectItems value="#{MBInstituicaoCadastro.listaBairro}"
							var="bairro" itemValue="#{bairro}" itemLabel="#{bairro.nome}" />
						<p:ajax event="change" listener="#{MBInstituicaoCadastro.buscaLogradouro}" update="cbLogradouro" />
						</p:selectOneMenu>
						<p:spacer width="2px;" />
						</h:panelGrid>

					<!-- Linha 6 -->
					<h:panelGrid columns="7">
						<p:outputLabel value="Logradouro:" />
						<h:inputHidden />
						<p:outputLabel value="Numero:" />
						<h:inputHidden />
						<p:outputLabel value="Complem.:" />
						<h:inputHidden />
						<p:outputLabel value="CEP:" />

						<p:selectOneMenu style="width:390px;" id="cbLogradouro" value="#{MBInstituicaoCadastro.logradouroSelecionado}"
							converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains" required="true" requiredMessage="Informe o Logradouro">
						<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
						<f:selectItems value="#{MBInstituicaoCadastro.listaLogradouro}"
							var="logradouro" itemValue="#{logradouro}" itemLabel="#{logradouro.nome}" />
						</p:selectOneMenu>
						<p:spacer width="2px;" />
						
						<p:inputText value="#{MBInstituicaoCadastro.numero}" required="true" requiredMessage="Informe o Numero" size="4" />
						<p:spacer width="2px;" />
						
						<p:inputText value="#{MBInstituicaoCadastro.complemento}" size="6" />
						<p:spacer width="2px;" />
						
						<p:inputMask id="cep" value="#{MBInstituicaoCadastro.cep}" mask="99999-999" size="6" />
					</h:panelGrid>
					</p:fieldset>
					
					
					</h:panelGrid>

					<!-- Linha 7 -->
					<h:panelGrid columns="1">
						<p:outputLabel value="Observação :" />

						<p:inputTextarea autoResize="False" rows="2" value="#{MBInstituicaoCadastro.obs}" cols="95" type="text" placeholder="Se necessário, insira observação." />
					</h:panelGrid>

					<h:panelGrid id="grdBotoes" style="margin: 10px auto;" columns="2" >
						<p:commandButton value="Salvar"
							actionListener="#{MBInstituicaoCadastro.salvar}" update=":formGrid ,:msgs1" />
						<p:commandButton value="Voltar" title="Busca Instituição"
							action="instituicao_busca?faces-redirect=true" immediate="true"/>
					</h:panelGrid>
					
				</h:form>
			</p:panel>
		</ui:define>
	</ui:composition>
</h:body>

</html>