<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:body>
	<ui:composition template="/WEB-INF/template/template_adm.xhtml">
		<ui:define name="content">
			<p:panel header="Atribuições" >											
				<h:form id="form">
				
	
					<p:messages id="msgs1" showDetail="true">  
	                     <p:effect type="pulsate" event="load" delay="500" />  
	                </p:messages>
					
					<h:panelGrid columns="5" style="margin-top: 5px;">						    
						<p:outputLabel value="Data atual :" />
						<h:inputHidden />
						<p:outputLabel value="Conselheiro :" />
						<h:inputHidden />
						<p:outputLabel value="Nuc. Familiar :" />
														
						<p:inputText value="12/02/2016" size="8" disabled="true" />
						<p:spacer width="8px;" />
						<p:inputText value="Testeee.." size="20" disabled="true" />
						<p:spacer width="8px;" />
						<p:inputText value="3" size="8" disabled="true" />
					</h:panelGrid>
						                																					
					<p:dataTable id="tblAdendos" var="adendo" value="#{MBAtendimento.listaAdendos}" paginator="true" rows="4" style="margin-top:1em" >
								      
					      <f:facet name="header" >
							 <p:spacer width="25" />
							 <h:outputText value="Lista descrição de atendimento e adendo" style="font-size: 15px;"  />											 								 				 							
					         <p:commandButton icon="ui-icon-plusthick" type="button" onclick="PF('dlgIncluir').show();" title="Insira novas atribuições" style="float: right" />					           				           
					      </f:facet>
					       					     					       
						  <p:column >
						  	  <h:outputText styleClass="texto_informativo_12" value="#{adendo.dataFatoFormatada}: " />									  	  
						      <h:outputText value="#{adendo.resumoDescricao}" />
						  </p:column>
						        									  									        									        									        					     						        						   									        									       					        					        					    
					</p:dataTable>
					<h:panelGrid columns="2" style="margin: 10px auto;" >						
						<p:commandButton value="Voltar" />
					</h:panelGrid>										    					    					    						
				</h:form>						
			</p:panel>
			
			<p:dialog header="Incluir Atribuições" widgetVar="dlgIncluir" 
					  modal="true" resizable="false"  appendTo="@(body)"
					  closable="false" draggable="false">					  					  
					  
					 <h:form id="formIncluir">														
						
						<h:panelGrid columns="5" style="margin-top: 5px;">						    
							<p:outputLabel styleClass="texto_informativo_14" value="Data :" />
							<h:inputHidden />
							<p:outputLabel styleClass="texto_informativo_14" value="Conselheiro :" />
							<h:inputHidden />
							<p:outputLabel styleClass="texto_informativo_14" value="Nuc. Familiar :" />
															
							<p:inputText value="12/02/2016" size="8" disabled="true" />
							<p:spacer width="8px;" />
							<p:inputText value="Testeee.." size="20" disabled="true" />
							<p:spacer width="8px;" />
							<p:inputText value="3" size="8" disabled="true" />
						</h:panelGrid>
						
						<h:panelGrid columns="3" style="margin-top: 15px;">
					    	<h:outputLabel styleClass="texto_informativo_14" value="Agente violador classe: " />	
					    	<h:inputHidden />
							<h:outputLabel styleClass="texto_informativo_14" value="Sub-classe: " />	
								
			           
			            	<p:selectOneMenu id="classe" value="#{MBAtendimento.agenteVioladorClasseSelecionado}" style="width:185px"
			            					 converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains">
					            <f:selectItem noSelectionOption="true" itemLabel="Selecione " />
					            <f:selectItems value="#{MBAtendimento.listaAgenteVioladorClasse}"
									var="classe" itemValue="#{classe}"
									itemLabel="#{classe.nome}" />
								<p:ajax event="change" listener="#{MBAtendimento.buscaAgenteVioladorSubClasse}" update="subClasse" />
					        </p:selectOneMenu>											        
					      
					        <h:inputHidden />
					        <p:selectOneMenu id="subClasse" value="#{MBAtendimento.agenteVioladorSubClasseSelecionado}" style="width:125px"
					        				 converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains">
					            <f:selectItem noSelectionOption="true" itemLabel="Selecione" />
					            <f:selectItems value="#{MBAtendimento.listaAgenteVioladorSubClasses}"
									var="subclasse" itemValue="#{subclasse}"
									itemLabel="#{subclasse.nome}" />
					        </p:selectOneMenu>
			            </h:panelGrid>
			            
			            <h:panelGrid style="margin-top: 15px;">
			            	<h:outputLabel styleClass="texto_informativo_14" value="Determinações Aplicadas" />
				            <p:selectCheckboxMenu id="menu" value="#{MBAtendimento.listaVioladoresSelecionadas}" label="Selecionar Determinações" converter="omnifaces.SelectItemsConverter"
	                              filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
					            <f:selectItems value="#{MBAtendimento.listaViolador}" />
					        </p:selectCheckboxMenu>
				        </h:panelGrid>
				        <h:panelGrid style="margin-top: 15px;">
				        	<h:outputLabel styleClass="texto_informativo_14" value="Descrição" />
				        	<p:inputTextarea value="#{MBAtendimento.descricaoAdendo}" autoResize="false" style="margin-top: 15px;"
						 				  rows="15" id="txtAdendo" cols="80" type="text" placeholder="Descreva um motivo para estar acrescentando novos dados neste atendimento"/>
				        </h:panelGrid>																	 					
						 
						 <!-- Linha 1 -->
						 <h:panelGrid columns="2" style="margin: 5px auto;">							 																				
							<p:commandButton id="btnSalvar" value="Salvar" update=":form:msgs1" />							
							<p:commandButton onclick="PF('dlgIncluir').hide()" value="Cancelar" />
						 </h:panelGrid>
						 
					 </h:form>
					  
			</p:dialog>
						
		</ui:define>
	</ui:composition>
</h:body>
</html>