<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:body>
	<ui:composition template="#{MBCidadoaCadastro.template}">
		<ui:define name="content">

			<p:panel header=" Cadastro de Cidadã(o)">
				<h:form id="formCidadao">

					<p:messages id="msgs1" showDetail="true" >
						<p:effect type="pulsate" event="load" delay="500" />
					</p:messages>

					<h:panelGrid>

						<!-- Linha 1 -->
						<h:panelGrid columns="3" style="margin-top: 20px;">
						
						<p:outputLabel value="Data Cadastro :" />
						<h:inputHidden />
						<p:outputLabel value="Conselheiro :" />
                          
							<p:inputText value="#{MBCidadoaCadastro.dataCadatsro}" size="8" disabled="true" />
							<p:spacer width="10px;" />
							<p:inputText value="#{MBCidadoaCadastro.nomeLogado}" size="20" disabled="true" />
						</h:panelGrid>

						<!-- Linha 2 -->
						<h:panelGrid columns="7">
							<p:outputLabel value="Nome Completo :" />
							<h:inputHidden />
							<p:outputLabel value="CPF:" />
							<h:inputHidden />
							<p:outputLabel value="RG:" />
							<h:inputHidden />
							<p:outputLabel value="Org. Emissor:" />

							<p:inputText value="#{MBCidadoaCadastro.pessoa.nomeCompleto}" size="40" type="text" placeholder="	Digite o nome" />
							<p:spacer width="10px;" />
							 
							<p:inputMask id="cpf" value="#{MBCidadoaCadastro.cpf}" mask="999.999.999-99" size="10">
							<p:ajax event="blur" listener="#{MBCidadoaCadastro.validaCPF}" update="msgs1" />
							</p:inputMask>
							<p:spacer width="10px;" />
							
							<p:inputText value="#{MBCidadoaCadastro.rg}" size="9" maxlength="9"  />
							<p:spacer width="10px;" />
							
							<p:selectOneMenu style="width:80px;" id="cbOrgao"
								value="#{MBCidadoaCadastro.orgaoSelecionado}"
								converter="omnifaces.SelectItemsConverter" filter="true"
								filterMatchMode="contains">
								<f:selectItem noSelectionOption="true" itemLabel="Selecione  " />
								<f:selectItems
									value="#{MBCidadoaCadastro.listaOrgao}"
									var="orgao" itemValue="#{orgao}"
									itemLabel="#{orgao.nome}" />
							</p:selectOneMenu>
							
						</h:panelGrid>

						<!-- Linha 3 -->
						<h:panelGrid columns="11">
							<p:outputLabel value="Cert.Nasc." />
							<h:inputHidden />
							<p:outputLabel value="Data Nasc.:" />
							<h:inputHidden />
							<p:outputLabel value="Idade:" />
							<h:inputHidden />
							<p:outputLabel value="Fone I:" />
							<h:inputHidden />
							<p:outputLabel value="Fone II:" />
							<h:inputHidden />
							<p:outputLabel value="Sexo:" />
							

							<p:inputText  value="#{MBCidadoaCadastro.certNasc}" size="11" maxlength="13"/>
							<p:spacer width="12px;" />
							
							<p:calendar id="popup"
								value="#{MBCidadoaCadastro.dataNascimento}" size="7" locale="br"
								navigator="true" pattern="dd/MM/yyyy"  >
								<p:ajax event="dateSelect"
								listener="#{MBCidadoaCadastro.calculaIdade}" update="txtIdade" />
							</p:calendar>
							<p:spacer width="11px;" />
							
							<p:inputText id="txtIdade" disabled="true"
								value="#{MBCidadoaCadastro.idade}" size="2" />
							<p:spacer width="10px;" />
							
							<p:inputMask id="fone1" value="#{MBCidadoaCadastro.pessoa.foneI}"
								mask="(99) 999?9-99999" size="11" />
							<p:spacer width="12px;" />
							
							<p:inputMask id="foneII" value="#{MBCidadoaCadastro.pessoa.foneII}"
								mask="(99) 999?9-99999" size="11" />
								<p:spacer width="12px;" />
								
								<p:selectOneRadio id="sexo" value="#{MBCidadoaCadastro.pessoa.sexo}" >
								<f:selectItem itemLabel="Masc." itemValue="M" />
								<f:selectItem itemLabel="Fem." itemValue="F" />
								</p:selectOneRadio>
							
						</h:panelGrid>

						<!-- Linha 4 -->
						<h:panelGrid columns="7">
							
							<p:outputLabel value="Cor:" />
							<h:inputHidden />
							<p:outputLabel value="Escolaridade:" />
							<h:inputHidden />
							<p:outputLabel value="Escola:" />
							<h:inputHidden />
							<p:outputLabel value="Estado civil:" />
					    	
							<p:selectOneMenu style="width:62px;" id="cor" value="#{MBCidadoaCadastro.pessoa.cor}">
								<f:selectItem itemLabel="Selecione" itemValue="" noSelectionOption="true" />
								<f:selectItem itemLabel="Amarela" itemValue="AM" />
								<f:selectItem itemLabel="Branca" itemValue="BR" />
								<f:selectItem itemLabel="Indígena" itemValue="IN" />
								<f:selectItem itemLabel="Parda" itemValue="PA" />
								<f:selectItem itemLabel="Preta" itemValue="PR" />
							</p:selectOneMenu>							
							<p:spacer width="6px;" />
							
							<p:selectOneMenu style="width:137px;" id="cbGrauEscola"
								value="#{MBCidadoaCadastro.pessoa.escolaridade}"
								converter="omnifaces.SelectItemsConverter" filter="true"
								filterMatchMode="contains">
								<f:selectItem noSelectionOption="true" itemLabel="Selecione  " />
								<f:selectItems
									value="#{MBCidadoaCadastro.listaGrauEscolaridade}"
									var="grauescolaridade" itemValue="#{grauescolaridade}"
									itemLabel="#{grauescolaridade.nome}" />
							</p:selectOneMenu>							
							<p:spacer width="6px;" />
							
							<p:selectOneMenu style="width:248px;" id="cbEscola"
								value="#{MBCidadoaCadastro.pessoa.escola}"
								converter="omnifaces.SelectItemsConverter" filter="true"
								filterMatchMode="contains">
								<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
								<f:selectItems value="#{MBCidadoaCadastro.listaInstituicao}"
									var="instituicao" itemValue="#{instituicao}"
									itemLabel="#{instituicao.fantasia}" />
							</p:selectOneMenu>
							<p:spacer width="6x;" />
							
							<p:selectOneMenu style="width:88px;" id="situacaoMatrimonial" value="#{MBCidadoaCadastro.pessoa.situacaoMatrimonial}">
								<f:selectItem itemLabel="Selecione" itemValue="" noSelectionOption="true" />
								<f:selectItem itemLabel="Amasiada(o)" itemValue="AM" />
								<f:selectItem itemLabel="Casada(o)" itemValue="CS" />
<!-- 								<f:selectItem itemLabel="Divorciada(o)" itemValue="DV" /> -->
								<f:selectItem itemLabel="Desconhecido" itemValue="NA" />
								<f:selectItem itemLabel="Separada(o)" itemValue="SP" />
								<f:selectItem itemLabel="Solteira(o)" itemValue="ST" />
								<f:selectItem itemLabel="Viuva(o)" itemValue="VU" />
							</p:selectOneMenu>
															
						</h:panelGrid>

						<!-- Linha 5 -->
						<h:panelGrid columns="5">
					    	<p:outputLabel value="Email:" />
					    	<h:inputHidden />
							<p:outputLabel value="Trabalha:" />
							<h:inputHidden />							
							<p:outputLabel value="Local trabalho:" />
							
							<p:inputText id="txtEmail" value="#{MBCidadoaCadastro.pessoa.email}" size="33" type="text" placeholder="mail@exemplo.com.br" />
							
							<p:spacer width="6x;" />							
														
							<p:selectOneRadio id="trabalha"
								value="#{MBCidadoaCadastro.trabalha}">
								<f:selectItem itemLabel="Sim" itemValue="S" />
								<f:selectItem itemLabel="Não" itemValue="N" />
								<p:ajax event="click" listener="#{MBCidadoaCadastro.alteraCampoTrabalho}"
									update="txtTrabalha" />
							</p:selectOneRadio>
							<p:spacer width="6x;" />
						
							<p:inputText id="txtTrabalha"
								disabled="#{MBCidadoaCadastro.desabilitaLocalTrabalho}"
								value="#{MBCidadoaCadastro.localTrabalho}" size="37" type="text" placeholder="	Digite local de trabalho" />
						</h:panelGrid>
						
						<!-- Linha 6 -->
						<h:panelGrid columns="6">
					    	<p:outputLabel value="Situação de trabalho:" />
					    	<h:inputHidden />
							<p:outputLabel value="Situação de moradia:" />
							<h:inputHidden />
							<p:outputLabel value="" />
							<h:inputHidden />
							
							<p:selectOneMenu style="width:188px;" id="situacaoTrabalho" value="#{MBCidadoaCadastro.pessoa.situacaoTrabalho}">
								<f:selectItem itemLabel="Selecione" itemValue="" noSelectionOption="true" />
								<f:selectItem itemLabel="Desconhecido" itemValue="DS" />
								<f:selectItem itemLabel="Estágio com remuneração" itemValue="EC" />
								<f:selectItem itemLabel="Estágio sem remuneração" itemValue="ES" />
								<f:selectItem itemLabel="Não remunerado" itemValue="NR" />
								<f:selectItem itemLabel="Não se aplica" itemValue="NA" />
								<f:selectItem itemLabel="Não trabalha" itemValue="NT" />
								<f:selectItem itemLabel="Remunerado com registro" itemValue="RC" />
								<f:selectItem itemLabel="Remunerado sem registro" itemValue="RS" />
								
							</p:selectOneMenu>
							<p:spacer width="20x;" />
							
							<p:selectOneMenu style="width:188px;" id="situacaoMoradia" value="#{MBCidadoaCadastro.pessoa.situacaoMoradia}">
								<f:selectItem itemLabel="Selecione" itemValue="" noSelectionOption="true" />
								<f:selectItem itemLabel="Desconhecido" itemValue="DS" />
								<f:selectItem itemLabel="Em situação de rua" itemValue="ER" />
								<f:selectItem itemLabel="Instituição" itemValue="IN" />
								<f:selectItem itemLabel="Residência fixa" itemValue="RF" />
								<f:selectItem itemLabel="Sem residência fixa" itemValue="SR" />
							</p:selectOneMenu>														
							
							</h:panelGrid>
						
					    </h:panelGrid>

					<p:fieldset id="pnEndereco" legend="Endereço" toggleable="true" toggleSpeed="500" collapsed="#{!MBCidadoaCadastro.enderecoPessoa}" rendered="#{!MBCidadoaCadastro.familia}">				        
				        <h:panelGrid columns="5">
							<p:outputLabel value="Estado:" />
							<h:inputHidden />
							<p:outputLabel value="Cidade:" />
							<h:inputHidden />
							<p:outputLabel value="Bairro:" />
	
							<p:selectOneMenu style="width:50px;" id="cbEstado" value="#{MBCidadoaCadastro.estadoSelecionado}"
							    converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains">
							<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
							<f:selectItems value="#{MBCidadoaCadastro.listaEstado}"
								var="estado" itemValue="#{estado}" itemLabel="#{estado.sigla}" />
							<p:ajax event="change" listener="#{MBCidadoaCadastro.buscaCidade}" update="cbCidade, cbBairro, cbLogradouro" />
							</p:selectOneMenu>
							<p:spacer width="2px;" />
	
							<p:selectOneMenu style="width:220px;" id="cbCidade" value="#{MBCidadoaCadastro.cidadeSelecionado}"
							    converter="omnifaces.SelectItemsConverter" filter="true"
								filterMatchMode="contains" >
							<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
							<f:selectItems value="#{MBCidadoaCadastro.listaCidade}"
								var="cidade" itemValue="#{cidade}" itemLabel="#{cidade.nome}" />
							<p:ajax event="change" listener="#{MBCidadoaCadastro.buscaBairro}" update="cbBairro, cbLogradouro" />
							</p:selectOneMenu>
							<p:spacer width="2px;" />
	
							<p:selectOneMenu style="width:285px;" id="cbBairro" value="#{MBCidadoaCadastro.bairroSelecionado}"
								converter="omnifaces.SelectItemsConverter" filter="true"
								filterMatchMode="contains" >
							<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
							<f:selectItems value="#{MBCidadoaCadastro.listaBairro}"
								var="bairro" itemValue="#{bairro}" itemLabel="#{bairro.nome}" />
							<p:ajax event="change" listener="#{MBCidadoaCadastro.buscaLogradouro}" update="cbLogradouro" />
							</p:selectOneMenu>
							<p:spacer width="2px;" />
						</h:panelGrid>

						<!-- Linha 6 -->
						<h:panelGrid columns="7">
							<p:outputLabel value="Logradouro:" />
							<h:inputHidden />
							<p:outputLabel value="Numero:" />
							<h:inputHidden />
							<p:outputLabel value="Complem.:" />
							<h:inputHidden />
							<p:outputLabel value="CEP:" />
	
							<p:selectOneMenu style="width:398px;" id="cbLogradouro" value="#{MBCidadoaCadastro.logradouroSelecionado}"
									converter="omnifaces.SelectItemsConverter" filter="true" filterMatchMode="contains" >
								<f:selectItem noSelectionOption="true" itemLabel="Selecione" />
								<f:selectItems value="#{MBCidadoaCadastro.listaLogradouro}"
									var="logradouro" itemValue="#{logradouro}" itemLabel="#{logradouro.nome}" />
							</p:selectOneMenu>
							<p:spacer width="2px;" />
							
							<p:inputText value="#{MBCidadoaCadastro.numero}" size="4" />
							<p:spacer width="2px;" />
							
							<p:inputText value="#{MBCidadoaCadastro.complemento}" size="4" />
							<p:spacer width="2px;" />
							
							<p:inputMask id="cep" value="#{MBCidadoaCadastro.logradouroSelecionado.cep}" disabled="true" mask="99999-999" size="5" />
						</h:panelGrid>
				    </p:fieldset>
					
					<h:panelGrid style="margin: 10px auto;" columns="3">
					<p:commandButton value="Salvar" actionListener="#{MBCidadoaCadastro.salvar}" update="msgs1, formCidadao, pnEndereco" title="Salvar Cidadã(o)" />
						<p:commandButton value="Voltar" action="cidadao_busca?faces-redirect=true" title="Busca Cidada(o)"/>	
						<p:commandButton value="Núcleo Familiar" rendered="#{MBCidadoaCadastro.familia}" 
					                action="#{MBCidadoaCadastro.navegaFamilia}" title="Ir para o Núcleo Familiar">					                					              
					    </p:commandButton>  		
					</h:panelGrid>

				</h:form>
			</p:panel>
		</ui:define>
	</ui:composition>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
</h:body>

</html>